{% comment %} SECTION: MAIN PRODUCT AURAGEMS {% endcomment %}
{{ 'product-auragems.css' | asset_url | stylesheet_tag }}
<script src="{{ 'product-info.js' | asset_url }}" defer="defer"></script>

<div class="product-auragems page-width" data-section-id="{{ section.id }}">
  <div class="product-auragems__container">
    
    <div class="product-auragems__gallery">
      {% render 'auragems-media-gallery', product: product %}
    </div>

    <div class="product-auragems__info">
      <div class="product-auragems__info-wrapper">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            
            {%- when '@app' -%}
              <div class="product-block">{% render block %}</div>

            {%- when 'title' -%}
              <div class="product-block product-block--title" {{ block.shopify_attributes }}>
                {%- if block.settings.show_vendor -%}
                  <span class="product-auragems__vendor">{{ product.vendor }}</span>
                {%- endif -%}
                <h1 class="product-auragems__title">{{ product.title }}</h1>
              </div>

            {%- when 'price' -%}
              <div class="product-block product-block--price" {{ block.shopify_attributes }}>
                {% render 'auragems-price', product: product %}
              </div>

            {%- when 'variant_picker' -%}
              <div class="product-block product-block--variants" {{ block.shopify_attributes }}>
                {% render 'auragems-variant-picker', product: product, section: section, product_form_id: 'product-form-auragems' %}
              </div>

            {%- when 'buy_buttons' -%}
              <div class="product-block product-block--buy" {{ block.shopify_attributes }}>
                {% render 'auragems-buy-buttons', product: product, section: section, product_form_id: 'product-form-auragems' %}
              </div>

            {%- when 'collapsible_tab' -%}
              <div class="product-block product-block--accordion" {{ block.shopify_attributes }}>
                 <details>
                   <summary>
                     <span>{{ block.settings.heading | default: block.settings.page.title }}</span>
                     {% render 'icon-caret' %}
                   </summary>
                   <div class="accordion__content">
                     {{ block.settings.content }}
                     {{ block.settings.page.content }}
                   </div>
                 </details>
              </div>

            {%- when 'description' -%}
              <div class="product-block product-block--description-full" {{ block.shopify_attributes }}>
                <h3 class="description-heading">Description</h3>
                <div class="rte">{{ product.description }}</div>
              </div>

          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Auragems Main Product",
  "tag": "section",
  "class": "section",
  "blocks": [
    { "type": "@app" },
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [{ "type": "checkbox", "id": "show_vendor", "label": "Show Vendor", "default": true }]
    },
    { "type": "price", "name": "Price", "limit": 1 },
    { "type": "variant_picker", "name": "Variant Picker", "limit": 1 },
    { "type": "buy_buttons", "name": "Buy Buttons", "limit": 1 },
    { "type": "description", "name": "Description", "limit": 1 },
    {
      "type": "collapsible_tab",
      "name": "Collapsible Tab",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "Shipping" },
        { "type": "richtext", "id": "content", "label": "Row Content" },
        { "type": "page", "id": "page", "label": "Row Page Content" }
      ]
    }
  ]
}
{% endschema %}